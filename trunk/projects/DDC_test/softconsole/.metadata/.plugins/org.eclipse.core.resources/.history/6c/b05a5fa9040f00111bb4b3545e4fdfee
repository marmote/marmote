/*
 * io_ports.c
 *
 *  Created on: Nov 14, 2011
 *      Author: babjak
 */

#include "flags.h"


void send_SPI(uint32_t data, uint8_t data_size)
{
/*
	GPIO_SCLK
	GPIO_SEN_RX
	GPIO_SDI
*/

	uint32_t mask = 0x00000001;
	mask = mask << (data_size - 1);

	ResetFlag(GPIO_OUTPUT, GPIO_SEN_RX);

	while (mask)
	{
		ResetFlag(GPIO_OUTPUT, GPIO_SCLK);

		SetFlagVal(GPIO_OUTPUT, GPIO_SDI, ((data & mask) ? 1 : 0);

		SetFlag(GPIO_OUTPUT, GPIO_SCLK);

		mask = mask >> 1;
	}

	SetFlag(GPIO_OUTPUT, GPIO_SEN_RX);

}
